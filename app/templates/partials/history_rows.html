{% for row in rows %}
<tr id="row-{{ row.id }}">
  <td style="padding:8px">
    {{ row.created_at.strftime("%Y-%m-%d %H:%M") if row.created_at else "-" }}
  </td>
  <td style="padding:8px">{{ row.topic }}</td>
  <td style="padding:8px">{{ row.mode }}/{{ row.tone }}</td>
  <td style="padding:8px">{{ row.words }}</td>
  <td style="padding:8px">{{ row.latency_ms }} ms</td>
  <td style="padding:8px; white-space:nowrap">
    <a href="/?topic={{ row.topic | urlencode }}&mode={{ row.mode }}&tone={{ row.tone }}"
       style="text-decoration:underline; color:#22d3ee; margin-right:12px">Повторити</a>

    <a href="/history/export/{{ row.id }}.txt" style="margin-right:12px">
      <button>Завантажити</button>
    </a>

    <button
      hx-post="/history/delete/{{ row.id }}"
      hx-target="#row-{{ row.id }}, #row-{{ row.id }}-result"
      hx-swap="outerHTML"
      class="btn-danger"
      title="Видалити цей запис"
    >Delete</button>
  </td>
</tr>
<tr id="row-{{ row.id }}-result">
  <td colspan="6" style="padding:8px 8px 16px">
    <div class="result">{{ row.result }}</div>
  </td>
</tr>
{% endfor %}
